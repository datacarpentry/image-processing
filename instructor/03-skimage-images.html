<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Image Processing with Python: Working with scikit-image</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="../assets/styles.css"><script src="../assets/scripts.js" type="text/javascript"></script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="manifest" href="../site.webmanifest"><link rel="mask-icon" href="../safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav data"><a class="visually-hidden-focusable skip-link" href="#main-content">Skip to main content</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Data Carpentry" src="../assets/images/data-logo.svg"></div>
    </div>
    <div class="selector-container">
      
      
      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='../03-skimage-images.html';">Learner View</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav data" aria-label="Main Navigation"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle Navigation">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menu</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Data Carpentry" src="../assets/images/data-logo-sm.svg"></div>
    <div class="lesson-title-md">
      Image Processing with Python
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Search the All In One page" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Image Processing with Python
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/key-points.html">Key Points</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/instructor-notes.html">Instructor Notes</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="../instructor/images.html">Extract All Images</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            More <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><hr><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="edge-detection.html">Extra Episode: Edge Detection</a></li><li><a class="dropdown-item" href="prereqs.html">Prerequisites</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <!--
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled>
      <input class="form-control me-2 searchbox" type="search" placeholder="" aria-label="">
        <button class="btn btn-outline-success tablet-search-button"  type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Search the All In One page"></i>
        </button>
      </fieldset>
    </form>
    -->
    <a class="btn btn-primary" href="../aio.html" role="button" aria-label="Search the All In One page">Search the All In One page</a>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Image Processing with Python
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 5%" class="percentage">
    5%
  </div>
  <div class="progress data">
    <div class="progress-bar data" role="progressbar" style="width: 5%" aria-valuenow="5" aria-label="Lesson Progress" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="close menu" alt="close menu" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Collapse " data-episodes="Episodes ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Instructor View
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="../03-skimage-images.html">Learner View</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->
      
            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODES
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Summary and Schedule</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="01-introduction.html">1. Introduction</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="02-image-basics.html">2. Image Basics</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        3. Working with scikit-image
        </span>
      </button>
    </div><!--/div.accordion-header-->
        
    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#first-import-the-packages-needed-for-this-episode">First, import the packages needed for this episode</a></li>
<li><a href="#reading-displaying-and-saving-images">Reading, displaying, and saving images</a></li>
<li><a href="#manipulating-pixels">Manipulating pixels</a></li>
<li><a href="#converting-colour-images-to-grayscale">Converting colour images to grayscale</a></li>
<li><a href="#access-via-slicing">Access via slicing</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="04-drawing.html">4. Drawing and Bitwise Operations</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="05-creating-histograms.html">5. Creating Histograms</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush7">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading7">
        <a href="06-blurring.html">6. Blurring Images</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="07-thresholding.html">7. Thresholding</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush9">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading9">
        <a href="08-connected-components.html">8. Connected Component Analysis</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush10">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading10">
        <a href="09-challenges.html">9. Capstone Challenge</a>
    </div><!--/div.accordion-header-->
        
  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RESOURCES
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="../instructor/key-points.html">Key Points</a>
                      </li>
                      <li>
                        <a href="../instructor/instructor-notes.html">Instructor Notes</a>
                      </li>
                      <li>
                        <a href="../instructor/images.html">Extract All Images</a>
                      </li>
                      <hr><li><a class="dropdown-item" href="discuss.html">Discussion</a></li><li><a class="dropdown-item" href="edge-detection.html">Extra Episode: Edge Detection</a></li><li><a class="dropdown-item" href="prereqs.html">Prerequisites</a></li><li><a class="dropdown-item" href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="../instructor/aio.html">See all in one page</a>
            

            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">
            
            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Previous and Next Chapter"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/02-image-basics.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/04-drawing.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/02-image-basics.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Image Basics
        </a>
        <a class="chapter-link float-end" href="../instructor/04-drawing.html" rel="next">
          Next: Drawing and Bitwise... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Working with scikit-image</h1>
        <p>Last updated on 2024-06-07 |
        
        <a href="https://github.com/datacarpentry/image-processing/edit/main/episodes/03-skimage-images.md" class="external-link">Edit this page <i aria-hidden="true" data-feather="edit"></i></a></p>
        
        
        
        <p>Estimated time: <i aria-hidden="true" data-feather="clock"></i> 120 minutes</p>
        
        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Expand All Solutions " data-collapse="Collapse All Solutions "> Expand All Solutions <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Overview</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Questions</h3>
<ul><li>How can the scikit-image Python computer vision library be used to
work with images?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objectives</h3>
<ul><li>Read and save images with imageio.</li>
<li>Display images with Matplotlib.</li>
<li>Resize images with scikit-image.</li>
<li>Perform simple image thresholding with NumPy array operations.</li>
<li>Extract sub-images using array slicing.</li>
</ul></div>
</div>
</div>
</div>
</div>
<p>We have covered much of how images are represented in computer
software. In this episode we will learn some more methods for accessing
and changing digital images.</p>
<section id="first-import-the-packages-needed-for-this-episode"><h2 class="section-heading">First, import the packages needed for this episode<a class="anchor" aria-label="anchor" href="#first-import-the-packages-needed-for-this-episode"></a>
</h2>
<hr class="half-width"><div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="im">import</span> imageio.v3 <span class="im">as</span> iio</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a><span class="im">import</span> ipympl</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a><span class="im">import</span> skimage <span class="im">as</span> ski</span>
<span id="cb1-6"><a href="#cb1-6" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" tabindex="-1"></a><span class="op">%</span>matplotlib widget</span></code></pre>
</div>
</section><section id="reading-displaying-and-saving-images"><h2 class="section-heading">Reading, displaying, and saving images<a class="anchor" aria-label="anchor" href="#reading-displaying-and-saving-images"></a>
</h2>
<hr class="half-width"><p>Imageio provides intuitive functions for reading and writing (saving)
images. All of the popular image formats, such as BMP, PNG, JPEG, and
TIFF are supported, along with several more esoteric formats. Check the
<a href="https://imageio.readthedocs.io/en/stable/formats/index.html" class="external-link">Supported
Formats docs</a> for a list of all formats. Matplotlib provides a large
collection of plotting utilities.</p>
<p>Let us examine a simple Python program to load, display, and save an
image to a different format. Here are the first few lines:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="co">"""Python program to open, display, and save an image."""</span></span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a><span class="co"># read image</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>chair <span class="op">=</span> iio.imread(uri<span class="op">=</span><span class="st">"data/chair.jpg"</span>)</span></code></pre>
</div>
<p>We use the <code>iio.imread()</code> function to read a JPEG image
entitled <strong>chair.jpg</strong>. Imageio reads the image, converts
it from JPEG into a NumPy array, and returns the array; we save the
array in a variable named <code>chair</code>.</p>
<p>Next, we will do something with the image:</p>
<div class="codewrapper sourceCode" id="cb3">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>ax.imshow(chair)</span></code></pre>
</div>
<p>Once we have the image in the program, we first call
<code>fig, ax = plt.subplots()</code> so that we will have a fresh
figure with a set of axes independent from our previous calls. Next we
call <code>ax.imshow()</code> in order to display the image.</p>
<p>Now, we will save the image in another format:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="co"># save a new version in .tif format</span></span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>iio.imwrite(uri<span class="op">=</span><span class="st">"data/chair.tif"</span>, image<span class="op">=</span>chair)</span></code></pre>
</div>
<p>The final statement in the program,
<code>iio.imwrite(uri="data/chair.tif", image=chair)</code>, writes the
image to a file named <code>chair.tif</code> in the <code>data/</code>
directory. The <code>imwrite()</code> function automatically determines
the type of the file, based on the file extension we provide. In this
case, the <code>.tif</code> extension causes the image to be saved as a
TIFF.</p>
<div id="metadata-revisited" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="metadata-revisited" class="callout-inner">
<h3 class="callout-title">Metadata, revisited<a class="anchor" aria-label="anchor" href="#metadata-revisited"></a>
</h3>
<div class="callout-content">
<p>Remember, as mentioned in the previous section, <em>images saved with
<code>imwrite()</code> will not retain all metadata associated with the
original image that was loaded into Python!</em> If the image metadata
is important to you, be sure to <strong>always keep an unchanged copy of
the original image!</strong></p>
</div>
</div>
</div>
<div id="extensions-do-not-always-dictate-file-type" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="extensions-do-not-always-dictate-file-type" class="callout-inner">
<h3 class="callout-title">Extensions do not always dictate file
type<a class="anchor" aria-label="anchor" href="#extensions-do-not-always-dictate-file-type"></a>
</h3>
<div class="callout-content">
<p>The <code>iio.imwrite()</code> function automatically uses the file
type we specify in the file name parameter’s extension. Note that this
is not always the case. For example, if we are editing a document in
Microsoft Word, and we save the document as <code>paper.pdf</code>
instead of <code>paper.docx</code>, the file <em>is not</em> saved as a
PDF document.</p>
</div>
</div>
</div>
<div id="named-versus-positional-arguments" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="named-versus-positional-arguments" class="callout-inner">
<h3 class="callout-title">Named versus positional arguments<a class="anchor" aria-label="anchor" href="#named-versus-positional-arguments"></a>
</h3>
<div class="callout-content">
<p>When we call functions in Python, there are two ways we can specify
the necessary arguments. We can specify the arguments
<em>positionally</em>, i.e., in the order the parameters appear in the
function definition, or we can use <em>named arguments</em>.</p>
<p>For example, the <code>iio.imwrite()</code> <a href="https://imageio.readthedocs.io/en/stable/_autosummary/imageio.v3.imwrite.html" class="external-link">function
definition</a> specifies two parameters, the resource to save the image
to (e.g., a file name, an http address) and the image to write to disk.
So, we could save the chair image in the sample code above using
positional arguments like this:</p>
<p><code>iio.imwrite("data/chair.tif", image)</code></p>
<p>Since the function expects the first argument to be the file name,
there is no confusion about what <code>"data/chair.jpg"</code> means.
The same goes for the second argument.</p>
<p>The style we will use in this workshop is to name each argument, like
this:</p>
<p><code>iio.imwrite(uri="data/chair.tif", image=image)</code></p>
<p>This style will make it easier for you to learn how to use the
variety of functions we will cover in this workshop.</p>
</div>
</div>
</div>
<div id="resizing-an-image-10-min" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="resizing-an-image-10-min" class="callout-inner">
<h3 class="callout-title">Resizing an image (10 min)<a class="anchor" aria-label="anchor" href="#resizing-an-image-10-min"></a>
</h3>
<div class="callout-content">
<p>Using the <code>chair.jpg</code> image located in the data folder,
write a Python script to read your image into a variable named
<code>chair</code>. Then, resize the image to 10 percent of its current
size using these lines of code:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>new_shape <span class="op">=</span> (chair.shape[<span class="dv">0</span>] <span class="op">//</span> <span class="dv">10</span>, chair.shape[<span class="dv">1</span>] <span class="op">//</span> <span class="dv">10</span>, chair.shape[<span class="dv">2</span>])</span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>resized_chair <span class="op">=</span> ski.transform.resize(image<span class="op">=</span>chair, output_shape<span class="op">=</span>new_shape)</span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>resized_chair <span class="op">=</span> ski.util.img_as_ubyte(resized_chair)</span></code></pre>
</div>
<p>As it is used here, the parameters to the
<code>ski.transform.resize()</code> function are the image to transform,
<code>chair</code>, the dimensions we want the new image to have,
<code>new_shape</code>.</p>
<div id="callout4" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Callout<a class="anchor" aria-label="anchor" href="#callout4"></a>
</h3>
<div class="callout-content">
<p>Note that the pixel values in the new image are an approximation of
the original values and should not be confused with actual, observed
data. This is because scikit-image interpolates the pixel values when
reducing or increasing the size of an image.
<code>ski.transform.resize</code> has a number of optional parameters
that allow the user to control this interpolation. You can find more
details in the <a href="https://scikit-image.org/docs/stable/api/skimage.transform.html#skimage.transform.resize" class="external-link">scikit-image
documentation</a>.</p>
</div>
</div>
</div>
<p>Image files on disk are normally stored as whole numbers for space
efficiency, but transformations and other math operations often result
in conversion to floating point numbers. Using the
<code>ski.util.img_as_ubyte()</code> method converts it back to whole
numbers before we save it back to disk. If we don’t convert it before
saving, <code>iio.imwrite()</code> may not recognise it as image
data.</p>
<p>Next, write the resized image out to a new file named
<code>resized.jpg</code> in your data directory. Finally, use
<code>ax.imshow()</code> with each of your image variables to display
both images in your notebook. Don’t forget to use
<code>fig, ax = plt.subplots()</code> so you don’t overwrite the first
image with the second. Images may appear the same size in jupyter, but
you can see the size difference by comparing the scales for each. You
can also see the difference in file storage size on disk by hovering
your mouse cursor over the original and the new files in the Jupyter
file browser, using <code>ls -l</code> in your shell (<code>dir</code>
with Windows PowerShell), or viewing file sizes in the OS file browser
if it is configured so.</p>
</div>
</div>
</div>
<div id="accordionSolution1" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution1" aria-expanded="false" aria-controls="collapseSolution1">
  <h4 class="accordion-header" id="headingSolution1">Show me the solution</h4>
</button>
<div id="collapseSolution1" class="accordion-collapse collapse" data-bs-parent="#accordionSolution1" aria-labelledby="headingSolution1">
<div class="accordion-body">
<p>Here is what your Python script might look like.</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">"""Python script to read an image, resize it, and save it under a different name."""</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co"># read in image</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>chair <span class="op">=</span> iio.imread(uri<span class="op">=</span><span class="st">"data/chair.jpg"</span>)</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a></span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a><span class="co"># resize the image</span></span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>new_shape <span class="op">=</span> (chair.shape[<span class="dv">0</span>] <span class="op">//</span> <span class="dv">10</span>, chair.shape[<span class="dv">1</span>] <span class="op">//</span> <span class="dv">10</span>, chair.shape[<span class="dv">2</span>])</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>resized_chair <span class="op">=</span> ski.transform.resize(image<span class="op">=</span>chair, output_shape<span class="op">=</span>new_shape)</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>resized_chair <span class="op">=</span> ski.util.img_as_ubyte(resized_chair)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a><span class="co"># write out image</span></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a>iio.imwrite(uri<span class="op">=</span><span class="st">"data/resized_chair.jpg"</span>, image<span class="op">=</span>resized_chair)</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a><span class="co"># display images</span></span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>ax.imshow(chair)</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a>ax.imshow(resized_chair)</span></code></pre>
</div>
<p>The script resizes the <code>data/chair.jpg</code> image by a factor
of 10 in both dimensions, saves the result to the
<code>data/resized_chair.jpg</code> file, and displays original and
resized for comparision.</p>
</div>
</div>
</div>
</div>
</section><section id="manipulating-pixels"><h2 class="section-heading">Manipulating pixels<a class="anchor" aria-label="anchor" href="#manipulating-pixels"></a>
</h2>
<hr class="half-width"><p>In <a href="02-image-basics.html">the <em>Image Basics</em>
episode</a>, we individually manipulated the colours of pixels by
changing the numbers stored in the image’s NumPy array. Let’s apply the
principles learned there along with some new principles to a real world
example.</p>
<p>Suppose we are interested in this maize root cluster image. We want
to be able to focus our program’s attention on the roots themselves,
while ignoring the black background.</p>
<figure><img src="../data/maize-root-cluster.jpg" alt="Root cluster image" class="figure mx-auto d-block"></figure><p>Since the image is stored as an array of numbers, we can simply look
through the array for pixel colour values that are less than some
threshold value. This process is called <em>thresholding</em>, and we
will see more powerful methods to perform the thresholding task in <a href="07-thresholding.html">the <em>Thresholding</em> episode</a>. Here,
though, we will look at a simple and elegant NumPy method for
thresholding. Let us develop a program that keeps only the pixel colour
values in an image that have value greater than or equal to 128. This
will keep the pixels that are brighter than half of “full brightness”,
i.e., pixels that do not belong to the black background.</p>
<p>We will start by reading the image and displaying it.</p>
<div id="loading-images-with-imageio-read-only-arrays" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="loading-images-with-imageio-read-only-arrays" class="callout-inner">
<h3 class="callout-title">Loading images with imageio: Read-only
arrays<a class="anchor" aria-label="anchor" href="#loading-images-with-imageio-read-only-arrays"></a>
</h3>
<div class="callout-content">
<p>When loading an image with imageio, in certain situations the image
is stored in a read-only array. If you attempt to manipulate the pixels
in a read-only array, you will receive an error message
<code>ValueError: assignment destination is read-only</code>. In order
to make the image array writeable, we can create a copy with
<code>image = np.array(image)</code> before manipulating the pixel
values.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a><span class="co">"""Python script to ignore low intensity pixels in an image."""</span></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co"># read input image</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a>maize_roots <span class="op">=</span> iio.imread(uri<span class="op">=</span><span class="st">"data/maize-root-cluster.jpg"</span>)</span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a>maize_roots <span class="op">=</span> np.array(maize_roots)</span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="co"># display original image</span></span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>ax.imshow(maize_roots)</span></code></pre>
</div>
<p>Now we can threshold the image and display the result.</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co"># keep only high-intensity pixels</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a>maize_roots[maize_roots <span class="op">&lt;</span> <span class="dv">128</span>] <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="co"># display modified image</span></span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>ax.imshow(maize_roots)</span></code></pre>
</div>
<p>The NumPy command to ignore all low-intensity pixels is
<code>roots[roots &lt; 128] = 0</code>. Every pixel colour value in the
whole 3-dimensional array with a value less that 128 is set to zero. In
this case, the result is an image in which the extraneous background
detail has been removed.</p>
<figure><img src="../fig/maize-root-cluster-threshold.jpg" alt="Thresholded root image" class="figure mx-auto d-block"></figure></section><section id="converting-colour-images-to-grayscale"><h2 class="section-heading">Converting colour images to grayscale<a class="anchor" aria-label="anchor" href="#converting-colour-images-to-grayscale"></a>
</h2>
<hr class="half-width"><p>It is often easier to work with grayscale images, which have a single
channel, instead of colour images, which have three channels.
scikit-image offers the function <code>ski.color.rgb2gray()</code> to
achieve this. This function adds up the three colour channels in a way
that matches human colour perception, see <a href="https://scikit-image.org/docs/dev/api/skimage.color.html#skimage.color.rgb2gray" class="external-link">the
scikit-image documentation for details</a>. It returns a grayscale image
with floating point values in the range from 0 to 1. We can use the
function <code>ski.util.img_as_ubyte()</code> in order to convert it
back to the original data type and the data range back 0 to 255. Note
that it is often better to use image values represented by floating
point values, because using floating point numbers is numerically more
stable.</p>
<div id="colour-and-color" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="colour-and-color" class="callout-inner">
<h3 class="callout-title">Colour and<code>color</code><a class="anchor" aria-label="anchor" href="#colour-and-color"></a>
</h3>
<div class="callout-content">
<p>The Carpentries generally prefers UK English spelling, which is why
we use “colour” in the explanatory text of this lesson. However,
scikit-image contains many modules and functions that include the US
English spelling, <code>color</code>. The exact spelling matters here,
e.g. you will encounter an error if you try to run
<code>ski.colour.rgb2gray()</code>. To account for this, we will use the
US English spelling, <code>color</code>, in example Python code
throughout the lesson. You will encounter a similar approach with
“centre” and <code>center</code>.</p>
</div>
</div>
</div>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="co">"""Python script to load a color image as grayscale."""</span></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a><span class="co"># read input image</span></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a>chair <span class="op">=</span> iio.imread(uri<span class="op">=</span><span class="st">"data/chair.jpg"</span>)</span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a></span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a><span class="co"># display original image</span></span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>ax.imshow(chair)</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="co"># convert to grayscale and display</span></span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>gray_chair <span class="op">=</span> ski.color.rgb2gray(chair)</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>ax.imshow(gray_chair, cmap<span class="op">=</span><span class="st">"gray"</span>)</span></code></pre>
</div>
<p>We can also load colour images as grayscale directly by passing the
argument <code>mode="L"</code> to <code>iio.imread()</code>.</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a><span class="co">"""Python script to load a color image as grayscale."""</span></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co"># read input image, based on filename parameter</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a>gray_chair <span class="op">=</span> iio.imread(uri<span class="op">=</span><span class="st">"data/chair.jpg"</span>, mode<span class="op">=</span><span class="st">"L"</span>)</span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a></span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a><span class="co"># display grayscale image</span></span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>ax.imshow(gray_chair, cmap<span class="op">=</span><span class="st">"gray"</span>)</span></code></pre>
</div>
<p>The first argument to <code>iio.imread()</code> is the filename of
the image. The second argument <code>mode="L"</code> determines the type
and range of the pixel values in the image (e.g., an 8-bit pixel has a
range of 0-255). This argument is forwarded to the <code>pillow</code>
backend, a Python imaging library for which mode “L” means 8-bit pixels
and single-channel (i.e., grayscale). The backend used by
<code>iio.imread()</code> may be specified as an optional argument: to
use <code>pillow</code>, you would pass <code>plugin="pillow"</code>. If
the backend is not specified explicitly, <code>iio.imread()</code>
determines the backend to use based on the image type.</p>
<div id="loading-images-with-imageio-pixel-type-and-depth" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="loading-images-with-imageio-pixel-type-and-depth" class="callout-inner">
<h3 class="callout-title">Loading images with imageio: Pixel type and
depth<a class="anchor" aria-label="anchor" href="#loading-images-with-imageio-pixel-type-and-depth"></a>
</h3>
<div class="callout-content">
<p>When loading an image with <code>mode="L"</code>, the pixel values
are stored as 8-bit integer numbers that can take values in the range
0-255. However, pixel values may also be stored with other types and
ranges. For example, some scikit-image functions return the pixel values
as floating point numbers in the range 0-1. The type and range of the
pixel values are important for the colorscale when plotting, and for
masking and thresholding images as we will see later in the lesson. If
you are unsure about the type of the pixel values, you can inspect it
with <code>print(image.dtype)</code>. For the example above, you should
find that it is <code>dtype('uint8')</code> indicating 8-bit integer
numbers.</p>
</div>
</div>
</div>
<div id="keeping-only-low-intensity-pixels-10-min" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="keeping-only-low-intensity-pixels-10-min" class="callout-inner">
<h3 class="callout-title">Keeping only low intensity pixels (10
min)<a class="anchor" aria-label="anchor" href="#keeping-only-low-intensity-pixels-10-min"></a>
</h3>
<div class="callout-content">
<p>A little earlier, we showed how we could use Python and scikit-image
to turn on only the high intensity pixels from an image, while turning
all the low intensity pixels off. Now, you can practice doing the
opposite - keeping all the low intensity pixels while changing the high
intensity ones.</p>
<p>The file <code>data/sudoku.png</code> is an RGB image of a sudoku
puzzle:</p>
<figure><img src="../data/sudoku.png" alt="Su-Do-Ku puzzle" class="figure mx-auto d-block"></figure><p>Your task is to load the image in grayscale format and turn all of
the bright pixels in the image to a light gray colour. In other words,
mask the bright pixels that have a pixel value greater than, say, 192
and set their value to 192 (the value 192 is chosen here because it
corresponds to 75% of the range 0-255 of an 8-bit pixel). The results
should look like this:</p>
<figure><img src="../fig/sudoku-gray.png" alt="Modified Su-Do-Ku puzzle" class="figure mx-auto d-block"></figure><p><em>Hint: the <code>cmap</code>, <code>vmin</code>, and
<code>vmax</code> parameters of <code>matplotlib.pyplot.imshow</code>
will be needed to display the modified image as desired. See the <a href="https://matplotlib.org/stable/api/_as_gen/matplotlib.pyplot.imshow.html" class="external-link">Matplotlib
documentation</a> for more details on <code>cmap</code>,
<code>vmin</code>, and <code>vmax</code>.</em></p>
</div>
</div>
</div>
<div id="accordionSolution2" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution2" aria-expanded="false" aria-controls="collapseSolution2">
  <h4 class="accordion-header" id="headingSolution2">Show me the solution</h4>
</button>
<div id="collapseSolution2" class="accordion-collapse collapse" data-bs-parent="#accordionSolution2" aria-labelledby="headingSolution2">
<div class="accordion-body">
<p>First, load the image file <code>data/sudoku.png</code> as a
grayscale image. Note we may want to create a copy of the image array to
avoid modifying our original variable and also because
<code>imageio.v3.imread</code> sometimes returns a non-writeable
image.</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a>sudoku <span class="op">=</span> iio.imread(uri<span class="op">=</span><span class="st">"data/sudoku.png"</span>, mode<span class="op">=</span><span class="st">"L"</span>)</span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a>sudoku_gray_background <span class="op">=</span> np.array(sudoku)</span></code></pre>
</div>
<p>Then change all bright pixel values greater than 192 to 192:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a>sudoku_gray_background[sudoku_gray_background <span class="op">&gt;</span> <span class="dv">192</span>] <span class="op">=</span> <span class="dv">192</span></span></code></pre>
</div>
<p>Finally, display the original and modified images side by side. Note
that we have to specify <code>vmin=0</code> and <code>vmax=255</code> as
the range of the colorscale because it would otherwise automatically
adjust to the new range 0-192.</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(ncols<span class="op">=</span><span class="dv">2</span>)</span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a>ax[<span class="dv">0</span>].imshow(sudoku, cmap<span class="op">=</span><span class="st">"gray"</span>, vmin<span class="op">=</span><span class="dv">0</span>, vmax<span class="op">=</span><span class="dv">255</span>)</span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a>ax[<span class="dv">1</span>].imshow(sudoku_gray_background, cmap<span class="op">=</span><span class="st">"gray"</span>, vmin<span class="op">=</span><span class="dv">0</span>, vmax<span class="op">=</span><span class="dv">255</span>)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="plotting-single-channel-images-cmap-vmin-vmax" class="callout">
<div class="callout-square">
<i class="callout-icon" data-feather="bell"></i>
</div>
<div id="plotting-single-channel-images-cmap-vmin-vmax" class="callout-inner">
<h3 class="callout-title">Plotting single channel images (cmap, vmin,
vmax)<a class="anchor" aria-label="anchor" href="#plotting-single-channel-images-cmap-vmin-vmax"></a>
</h3>
<div class="callout-content">
<p>Compared to a colour image, a grayscale image contains only a single
intensity value per pixel. When we plot such an image with
<code>ax.imshow</code>, Matplotlib uses a colour map, to assign each
intensity value a colour. The default colour map is called “viridis” and
maps low values to purple and high values to yellow. We can instruct
Matplotlib to map low values to black and high values to white instead,
by calling <code>ax.imshow</code> with <code>cmap="gray"</code>. <a href="https://matplotlib.org/stable/gallery/color/colormap_reference.html" class="external-link">The
documentation contains an overview of pre-defined colour maps</a>.</p>
<p>Furthermore, Matplotlib determines the minimum and maximum values of
the colour map dynamically from the image, by default. That means that
in an image where the minimum is 64 and the maximum is 192, those values
will be mapped to black and white respectively (and not dark gray and
light gray as you might expect). If there are defined minimum and
maximum vales, you can specify them via <code>vmin</code> and
<code>vmax</code> to get the desired output.</p>
<p>If you forget about this, it can lead to unexpected results. Try
removing the <code>vmax</code> parameter from the sudoku challenge
solution and see what happens.</p>
</div>
</div>
</div>
</section><section id="access-via-slicing"><h2 class="section-heading">Access via slicing<a class="anchor" aria-label="anchor" href="#access-via-slicing"></a>
</h2>
<hr class="half-width"><p>As noted in the previous lesson scikit-image images are stored as
NumPy arrays, so we can use array slicing to select rectangular areas of
an image. Then, we can save the selection as a new image, change the
pixels in the image, and so on. It is important to remember that
coordinates are specified in <em>(ry, cx)</em> order and that colour
values are specified in <em>(r, g, b)</em> order when doing these
manipulations.</p>
<p>Consider this image of a whiteboard, and suppose that we want to
create a sub-image with just the portion that says “odd + even = odd,”
along with the red box that is drawn around the words.</p>
<figure><img src="../data/board.jpg" alt="Whiteboard image" class="figure mx-auto d-block"></figure><p>Using <code>matplotlib.pyplot.imshow</code> we can determine the
coordinates of the corners of the area we wish to extract by hovering
the mouse near the points of interest and noting the coordinates
(remember to run <code>%matplotlib widget</code> first if you haven’t
already). If we do that, we might settle on a rectangular area with an
upper-left coordinate of <em>(135, 60)</em> and a lower-right coordinate
of <em>(480, 150)</em>, as shown in this version of the whiteboard
picture:</p>
<figure><img src="../fig/board-coordinates.jpg" alt="Whiteboard coordinates" class="figure mx-auto d-block"></figure><p>Note that the coordinates in the preceding image are specified in
<em>(cx, ry)</em> order. Now if our entire whiteboard image is stored as
a NumPy array named <code>image</code>, we can create a new image of the
selected region with a statement like this:</p>
<p><code>clip = image[60:151, 135:481, :]</code></p>
<p>Our array slicing specifies the range of y-coordinates or rows first,
<code>60:151</code>, and then the range of x-coordinates or columns,
<code>135:481</code>. Note we go one beyond the maximum value in each
dimension, so that the entire desired area is selected. The third part
of the slice, <code>:</code>, indicates that we want all three colour
channels in our new image.</p>
<p>A script to create the subimage would start by loading the image:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co">"""Python script demonstrating image modification and creation via NumPy array slicing."""</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a><span class="co"># load and display original image</span></span>
<span id="cb14-4"><a href="#cb14-4" tabindex="-1"></a>board <span class="op">=</span> iio.imread(uri<span class="op">=</span><span class="st">"data/board.jpg"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" tabindex="-1"></a>board <span class="op">=</span> np.array(board)</span>
<span id="cb14-6"><a href="#cb14-6" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb14-7"><a href="#cb14-7" tabindex="-1"></a>ax.imshow(board)</span></code></pre>
</div>
<p>Then we use array slicing to create a new image with our selected
area and then display the new image.</p>
<div class="codewrapper sourceCode" id="cb15">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co"># extract, display, and save sub-image</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a>clipped_board <span class="op">=</span> board[<span class="dv">60</span>:<span class="dv">151</span>, <span class="dv">135</span>:<span class="dv">481</span>, :]</span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb15-4"><a href="#cb15-4" tabindex="-1"></a>ax.imshow(clipped_board)</span>
<span id="cb15-5"><a href="#cb15-5" tabindex="-1"></a>iio.imwrite(uri<span class="op">=</span><span class="st">"data/clipped_board.tif"</span>, image<span class="op">=</span>clipped_board)</span></code></pre>
</div>
<p>We can also change the values in an image, as shown next.</p>
<div class="codewrapper sourceCode" id="cb16">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># replace clipped area with sampled color</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>color <span class="op">=</span> board[<span class="dv">330</span>, <span class="dv">90</span>]</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a>board[<span class="dv">60</span>:<span class="dv">151</span>, <span class="dv">135</span>:<span class="dv">481</span>] <span class="op">=</span> color</span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>ax.imshow(board)</span></code></pre>
</div>
<p>First, we sample a single pixel’s colour at a particular location of
the image, saving it in a variable named <code>color</code>, which
creates a 1 × 1 × 3 NumPy array with the blue, green, and red colour
values for the pixel located at <em>(ry = 330, cx = 90)</em>. Then, with
the <code>img[60:151, 135:481] = color</code> command, we modify the
image in the specified area. From a NumPy perspective, this changes all
the pixel values within that range to array saved in the
<code>color</code> variable. In this case, the command “erases” that
area of the whiteboard, replacing the words with a beige colour, as
shown in the final image produced by the program:</p>
<figure><img src="../fig/board-final.jpg" alt='"Erased" whiteboard' class="figure mx-auto d-block"></figure><div id="practicing-with-slices-10-min---optional-not-included-in-timing" class="callout challenge">
<div class="callout-square">
<i class="callout-icon" data-feather="zap"></i>
</div>
<div id="practicing-with-slices-10-min---optional-not-included-in-timing" class="callout-inner">
<h3 class="callout-title">Practicing with slices (10 min - optional, not
included in timing)<a class="anchor" aria-label="anchor" href="#practicing-with-slices-10-min---optional-not-included-in-timing"></a>
</h3>
<div class="callout-content">
<p>Using the techniques you just learned, write a script that creates,
displays, and saves a sub-image containing only the plant and its roots
from “data/maize-root-cluster.jpg”</p>
</div>
</div>
</div>
<div id="accordionSolution3" class="accordion challenge-accordion accordion-flush">
<div class="accordion-item">
<button class="accordion-button solution-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseSolution3" aria-expanded="false" aria-controls="collapseSolution3">
  <h4 class="accordion-header" id="headingSolution3">Show me the solution</h4>
</button>
<div id="collapseSolution3" class="accordion-collapse collapse" data-bs-parent="#accordionSolution3" aria-labelledby="headingSolution3">
<div class="accordion-body">
<p>Here is the completed Python program to select only the plant and
roots in the image.</p>
<div class="codewrapper sourceCode" id="cb17">
<h3 class="code-label">PYTHON<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="sourceCode python" tabindex="0"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co">"""Python script to extract a sub-image containing only the plant and roots in an existing image."""</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a><span class="co"># load and display original image</span></span>
<span id="cb17-4"><a href="#cb17-4" tabindex="-1"></a>maize_roots <span class="op">=</span> iio.imread(uri<span class="op">=</span><span class="st">"data/maize-root-cluster.jpg"</span>)</span>
<span id="cb17-5"><a href="#cb17-5" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb17-6"><a href="#cb17-6" tabindex="-1"></a>ax.imshow(maize_roots)</span>
<span id="cb17-7"><a href="#cb17-7" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" tabindex="-1"></a><span class="co"># extract and display sub-image</span></span>
<span id="cb17-9"><a href="#cb17-9" tabindex="-1"></a>clipped_maize <span class="op">=</span> maize_roots[<span class="dv">0</span>:<span class="dv">400</span>, <span class="dv">275</span>:<span class="dv">550</span>, :]</span>
<span id="cb17-10"><a href="#cb17-10" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots()</span>
<span id="cb17-11"><a href="#cb17-11" tabindex="-1"></a>ax.imshow(clipped_maize)</span>
<span id="cb17-12"><a href="#cb17-12" tabindex="-1"></a></span>
<span id="cb17-13"><a href="#cb17-13" tabindex="-1"></a></span>
<span id="cb17-14"><a href="#cb17-14" tabindex="-1"></a><span class="co"># save sub-image</span></span>
<span id="cb17-15"><a href="#cb17-15" tabindex="-1"></a>iio.imwrite(uri<span class="op">=</span><span class="st">"data/clipped_maize.jpg"</span>, image<span class="op">=</span>clipped_maize)</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Key Points<a class="anchor" aria-label="anchor" href="#keypoints1"></a>
</h3>
<div class="callout-content">
<ul><li>Images are read from disk with the <code>iio.imread()</code>
function.</li>
<li>We create a window that automatically scales the displayed image
with Matplotlib and calling <code>imshow()</code> on the global figure
object.</li>
<li>Colour images can be transformed to grayscale using
<code>ski.color.rgb2gray()</code> or, in many cases, be read as
grayscale directly by passing the argument <code>mode="L"</code> to
<code>iio.imread()</code>.</li>
<li>We can resize images with the <code>ski.transform.resize()</code>
function.</li>
<li>NumPy array commands, such as
<code>image[image &lt; 128] = 0</code>, can be used to manipulate the
pixels of an image.</li>
<li>Array slicing can be used to extract sub-images or modify areas of
images, e.g., <code>clip = image[60:150, 135:480, :]</code>.</li>
<li>Metadata is not retained when images are loaded as NumPy arrays
using <code>iio.imread()</code>.</li>
</ul></div>
</div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Previous and Next Chapter"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="../instructor/02-image-basics.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previous</a>
        <a class="chapter-link float-end" href="../instructor/04-drawing.html">Next<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="../instructor/02-image-basics.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previous: Image Basics
        </a>
        <a class="chapter-link float-end" href="../instructor/04-drawing.html" rel="next">
          Next: Drawing and Bitwise... 
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>This lesson is subject to the <a href="CODE_OF_CONDUCT.html">Code of Conduct</a></p>
        <p>
        
        <a href="https://github.com/datacarpentry/image-processing/edit/main/episodes/03-skimage-images.md" class="external-link">Edit on GitHub</a>
        
	
        | <a href="https://github.com/datacarpentry/image-processing/blob/main/CONTRIBUTING.md" class="external-link">Contributing</a>
        | <a href="https://github.com/datacarpentry/image-processing/" class="external-link">Source</a></p>
				<p><a href="https://github.com/datacarpentry/image-processing/blob/main/CITATION" class="external-link">Cite</a> | <a href="mailto:team@carpentries.org">Contact</a> | <a href="https://carpentries.org/about/" class="external-link">About</a></p>
			</div>
			<div class="col-md-6">
        
        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>
        
        <p>Template licensed under <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> by <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Built with <a href="https://github.com/carpentries/sandpaper/tree/0.16.4" class="external-link">sandpaper (0.16.4)</a>, <a href="https://github.com/carpentries/pegboard/tree/0.7.5" class="external-link">pegboard (0.7.5)</a>, and <a href="https://github.com/carpentries/varnish/tree/1.0.2" class="external-link">varnish (1.0.2)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Back To Top"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://datacarpentry.github.io/image-processing/instructor/03-skimage-images.html",
  "inLanguage": "en",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Working with scikit-image",
  "creativeWorkStatus": "active",
  "url": "https://datacarpentry.github.io/image-processing/instructor/03-skimage-images.html",
  "identifier": "https://datacarpentry.github.io/image-processing/instructor/03-skimage-images.html",
  "dateCreated": "2017-03-14",
  "dateModified": "2024-06-07",
  "datePublished": "2024-06-07"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

